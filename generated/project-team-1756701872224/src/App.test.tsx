import React from 'react';
import { render, screen, fireEvent } from '@testing-library/react';
import '@testing-library/jest-dom';
import App from './App';

describe('Todo App', () => {
  test('renders todo app header', () => {
    render(<App />);
    const headerElement = screen.getByText(/Todo App/i);
    expect(headerElement).toBeInTheDocument();
  });

  test('can add a new todo', () => {
    render(<App />);
    
    const input = screen.getByPlaceholderText(/Add a new todo/i);
    const addButton = screen.getByText(/Add Todo/i);
    
    fireEvent.change(input, { target: { value: 'Test todo item' } });
    fireEvent.click(addButton);
    
    expect(screen.getByText('Test todo item')).toBeInTheDocument();
  });

  test('can toggle todo completion', () => {
    render(<App />);
    
    // Add a todo first
    const input = screen.getByPlaceholderText(/Add a new todo/i);
    fireEvent.change(input, { target: { value: 'Test todo' } });
    fireEvent.click(screen.getByText(/Add Todo/i));
    
    // Find and click the checkbox
    const checkbox = screen.getByRole('checkbox');
    fireEvent.click(checkbox);
    
    expect(checkbox).toBeChecked();
  });

  test('shows empty state when no todos', () => {
    render(<App />);
    expect(screen.getByText(/No todos yet/i)).toBeInTheDocument();
  });
});

// Generated by QA Testing Engineer
// Tests cover basic CRUD operations and user interactions
