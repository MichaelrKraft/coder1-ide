<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animation Debug Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f0f0f0;
        }
        .test-box {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        
        /* Test Animation 1 - Simple CSS */
        @keyframes simple-blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .simple-blink-test {
            animation: simple-blink 1s infinite;
            color: red;
            font-weight: bold;
            font-size: 20px;
        }
        
        /* Test Animation 2 - Matching component-browser exactly */
        @keyframes typewriter-blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
    </style>
</head>
<body>
    <h1>Animation Debug Tests</h1>
    
    <div class="test-box">
        <h2>Test 1: Simple CSS Animation (should blink)</h2>
        <div>Text with blinking cursor: <span class="simple-blink-test">|</span></div>
    </div>
    
    <div class="test-box">
        <h2>Test 2: Exact Component Browser CSS</h2>
        <div id="exact-test">Loading...</div>
    </div>
    
    <div class="test-box">
        <h2>Test 3: Dynamic Injection Test</h2>
        <div id="dynamic-test">Loading...</div>
    </div>
    
    <div class="test-box">
        <h2>Test 4: Preview Container Simulation</h2>
        <div class="preview-container" id="preview-sim" style="background: white; border: 1px solid #e5e5e5; border-radius: 8px; padding: 32px; min-height: 200px; display: flex; align-items: center; justify-content: center;">
            Loading...
        </div>
    </div>

    <script>
        // Test 2: Exact replication of component browser
        function test2() {
            const html = `<div style="display: flex; align-items: center; justify-content: center; padding: 40px; background: #f8fafc; border-radius: 8px;">
                        <div style="font-size: 24px; font-weight: 600; color: #3b82f6; font-family: monospace; position: relative;">
                            ✨ Typewriter Effect ✨<span style="animation: typewriter-blink 1s infinite; margin-left: 4px; color: #3b82f6; font-weight: bold;">|</span>
                        </div>
                    </div>`;
            document.getElementById('exact-test').innerHTML = html;
        }
        
        // Test 3: Dynamic CSS injection
        function test3() {
            // Inject CSS dynamically
            const animationId = 'dynamic-blink';
            if (!document.getElementById(animationId + '-style')) {
                const style = document.createElement('style');
                style.id = animationId + '-style';
                style.textContent = `
                    @keyframes ${animationId} {
                        0%, 50% { opacity: 1; color: blue; }
                        51%, 100% { opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
                console.log('Dynamic CSS injected for:', animationId);
            }
            
            const html = `<div>Dynamic injection test: <span style="animation: ${animationId} 0.5s infinite; font-weight: bold; font-size: 18px;">BLINKING</span></div>`;
            document.getElementById('dynamic-test').innerHTML = html;
        }
        
        // Test 4: Preview container simulation
        function test4() {
            // First inject the CSS
            const animationId = 'typewriter-blink';
            if (!document.getElementById(animationId + '-style')) {
                const style = document.createElement('style');
                style.id = animationId + '-style';
                style.textContent = `
                    @keyframes ${animationId} {
                        0%, 50% { opacity: 1; }
                        51%, 100% { opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
            
            // Exactly replicate the preview container HTML
            const previewContent = `<div style="display: flex; align-items: center; justify-content: center; padding: 40px; background: #f8fafc; border-radius: 8px;">
                        <div style="font-size: 24px; font-weight: 600; color: #3b82f6; font-family: monospace; position: relative;">
                            ✨ Typewriter Effect ✨<span style="animation: typewriter-blink 1s infinite; margin-left: 4px; color: #3b82f6; font-weight: bold;">|</span>
                        </div>
                    </div>`;
            
            const previewContainer = document.getElementById('preview-sim');
            previewContainer.innerHTML = previewContent;
            
            // Debug the animation
            const animatedElements = previewContainer.querySelectorAll('[style*="animation"]');
            console.log('Test 4 - Animated elements found:', animatedElements.length);
            animatedElements.forEach(el => {
                const computedStyle = window.getComputedStyle(el);
                console.log('Test 4 - Animation name:', computedStyle.animationName);
                console.log('Test 4 - Animation duration:', computedStyle.animationDuration);
                console.log('Test 4 - Animation iteration count:', computedStyle.animationIterationCount);
                console.log('Test 4 - Animation play state:', computedStyle.animationPlayState);
            });
        }
        
        // Run all tests
        window.addEventListener('load', () => {
            console.log('Running animation debug tests...');
            test2();
            setTimeout(test3, 500);
            setTimeout(test4, 1000);
            
            // Check if CSS animations are supported
            const testEl = document.createElement('div');
            testEl.style.animation = 'test 1s';
            const supported = testEl.style.animation !== '';
            console.log('CSS animations supported:', supported);
        });
    </script>
</body>
</html>