<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Coding Journey Hub - Coder1 IDE</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            /* Dark Theme Colors - Matching PRD Generator */
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --text-primary: #ffffff;
            --text-secondary: #e5e5e5;
            --text-muted: rgba(255, 255, 255, 0.7);
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --accent-primary: #8b5cf6;
            --accent-secondary: #06b6d4;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --info: #3b82f6;
            --shadow: rgba(0, 0, 0, 0.3);
            --gradient-1: #1a1a2e;
            --gradient-2: #16213e;
            --gradient-3: #0f0f23;
            --orb-1: rgba(147, 51, 234, 0.3);
            --orb-2: rgba(59, 130, 246, 0.3);
            --orb-3: rgba(16, 185, 129, 0.3);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* Back Button */
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-primary);
            padding: 10px 20px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            z-index: 1000;
            text-decoration: none;
        }
        
        .back-button:hover {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid #9333ea;
            box-shadow: 0 0 15px rgba(147, 51, 234, 0.4);
            transform: translateX(-2px);
        }
        
        /* Animated Background - Matching PRD Generator */
        .animated-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(45deg, var(--gradient-1), var(--gradient-2), var(--gradient-3));
            animation: gradientShift 15s ease infinite;
        }
        
        @keyframes gradientShift {
            0%, 100% { background: linear-gradient(45deg, var(--gradient-1), var(--gradient-2), var(--gradient-3)); }
            50% { background: linear-gradient(45deg, var(--gradient-2), var(--gradient-1), var(--gradient-3)); }
        }
        
        .gradient-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(40px);
            animation: float 20s ease-in-out infinite;
        }
        
        .orb-1 {
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, var(--orb-1), transparent);
            top: 20%;
            left: 10%;
            animation-delay: 0s;
        }
        
        .orb-2 {
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, var(--orb-2), transparent);
            top: 60%;
            right: 10%;
            animation-delay: -7s;
        }
        
        .orb-3 {
            width: 250px;
            height: 250px;
            background: radial-gradient(circle, var(--orb-3), transparent);
            bottom: 30%;
            left: 50%;
            animation-delay: -14s;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-30px) rotate(120deg); }
            66% { transform: translateY(15px) rotate(240deg); }
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: var(--text-primary);
            margin-bottom: 30px;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Enhanced gradient for the main title */
        .gradient-title {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #06b6d4 75%, #10b981 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
            animation: gradient-shift 3s ease infinite;
            background-size: 200% 200%;
        }
        
        @keyframes gradient-shift {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }
        
        .header p {
            font-size: 1.1rem;
            color: var(--text-muted);
        }
        
        .status-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .status-card {
            background: var(--glass-bg);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px var(--shadow);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            transition: all 0.3s ease;
        }
        
        .status-card:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-2px);
            box-shadow: 0 12px 40px var(--shadow);
            border: 1px solid #9333ea;
            box-shadow: 0 0 20px rgba(147, 51, 234, 0.5), 0 12px 40px var(--shadow);
        }
        
        .status-card h3 {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
        }
        
        .status-active { 
            background: var(--success);
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.3);
        }
        .status-idle { 
            background: var(--warning);
            box-shadow: 0 0 10px rgba(245, 158, 11, 0.3);
        }
        .status-error { 
            background: var(--error);
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.3);
        }
        
        .metric {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .metric-value {
            font-weight: 600;
            color: var(--accent-primary);
        }
        
        .detailed-panels {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .panel {
            background: var(--glass-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px var(--shadow);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            transition: all 0.3s ease;
        }
        
        .panel:hover {
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 12px 40px var(--shadow);
            border: 1px solid #9333ea;
            box-shadow: 0 0 20px rgba(147, 51, 234, 0.5), 0 12px 40px var(--shadow);
        }
        
        .panel h2 {
            margin-bottom: 20px;
            color: var(--text-primary);
            border-bottom: 2px solid var(--accent-primary);
            padding-bottom: 10px;
            font-weight: 600;
        }
        
        .suggestions-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .suggestion-item {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 4px solid var(--accent-primary);
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }
        
        .suggestion-category {
            font-size: 0.8rem;
            color: var(--accent-primary);
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .suggestion-content {
            margin-top: 5px;
            color: var(--text-secondary);
        }
        
        .suggestion-confidence {
            float: right;
            background: var(--accent-primary);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
        }
        
        .log-entry {
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.8rem;
            padding: 8px 12px;
            margin-bottom: 5px;
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-secondary);
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }
        
        .log-timestamp {
            color: var(--text-muted);
        }
        
        .log-emoji {
            margin-right: 5px;
        }
        
        .refresh-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .refresh-btn {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 25px;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-primary);
            box-shadow: 0 4px 15px var(--shadow);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .refresh-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px var(--shadow);
        }
        
        .auto-refresh {
            margin-left: 10px;
            color: var(--text-muted);
            font-size: 0.9rem;
        }
        
        .memory-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .memory-stat {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }
        
        .memory-stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent-primary);
        }
        
        .memory-stat-label {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 5px;
        }
        
        .memory-stat-emoji {
            font-size: 2rem;
            margin-bottom: 8px;
            display: block;
        }
        
        .memory-stat-subtitle {
            font-size: 0.75rem;
            color: var(--accent-primary);
            margin-top: 3px;
            font-style: italic;
            font-weight: 500;
        }
        
        .chart-container {
            position: relative;
            height: 200px;
            margin-top: 20px;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .loading {
            animation: pulse 1.5s infinite;
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-background">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>
    
    <!-- Navigation Buttons -->
    <a href="/ide" class="back-button">
        ‚Üê Back to IDE
    </a>
    <a href="/hooks" class="back-button" style="left: 180px;">
        ‚öôÔ∏è Hooks
    </a>
    
    <div class="container">
        <div class="header">
            <h1 class="gradient-title">Your Coding Journey Hub</h1>
            <p>Your personal guide to building amazing projects with confidence üöÄ</p>
        </div>
        
        <div class="refresh-controls">
            <button class="refresh-btn" onclick="refreshAll()">üîÑ Refresh</button>
            <span class="auto-refresh">Auto-refresh: <span id="auto-refresh-status">ON</span></span>
        </div>
        
        <div class="status-overview" id="status-overview">
            <!-- System status cards will be populated here -->
        </div>
        
        <div class="detailed-panels">
            <div class="panel">
                <h2>üéØ Your Next Best Steps</h2>
                <div class="suggestions-list" id="suggestions-list">
                    <div class="loading">Finding great next moves for you...</div>
                </div>
            </div>
            
            <div class="panel">
                <h2>üåü Recent Wins & Progress</h2>
                <div id="activity-log" style="max-height: 300px; overflow-y: auto;">
                    <div class="loading">Celebrating your achievements...</div>
                </div>
            </div>
        </div>
        
        <div class="detailed-panels">
            <div class="panel">
                <h2>üìö Your Learning Journey</h2>
                <div class="memory-stats" id="memory-stats">
                    <div class="loading">Tracking your skill growth...</div>
                </div>
                <div class="chart-container">
                    <canvas id="memory-chart"></canvas>
                </div>
            </div>
            
            <div class="panel">
                <h2>üí° AI Confidence Guide</h2>
                <div id="approval-stats">
                    <div class="loading">Checking my confidence levels...</div>
                </div>
                <div class="chart-container">
                    <canvas id="approval-chart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const API_BASE = window.location.origin;
        const REFRESH_INTERVAL = 60000; // 60 seconds (reduced frequency with WebSocket real-time updates)
        
        let autoRefresh = true;
        let refreshTimer;
        let memoryChart, approvalChart;
        
        // Vibe Coach Features
        const COACHING_SYSTEMS = [
            {
                id: 'progress-visualizer',
                name: 'Project Progress Tracker',
                icon: 'üöÄ',
                description: 'Your coding journey milestones and achievements'
            },
            {
                id: 'confidence-meter',
                name: 'AI Confidence Guide',
                icon: 'üí°',
                description: 'How confident I am about my suggestions for you'
            },
            {
                id: 'next-actions',
                name: 'Next Best Steps',
                icon: 'üéØ',
                description: 'Konkrete actions to move your project forward'
            },
            {
                id: 'learning-tracker',
                name: 'Skill Development',
                icon: 'üìö',
                description: 'Track your growing coding superpowers'
            },
            {
                id: 'problem-detector',
                name: 'Smart Problem Spotter',
                icon: 'üîç',
                description: 'Friendly early warnings and helpful tips'
            }
        ];
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeCharts();
            refreshAll();
            
            // Check if Socket.IO is available for real-time updates
            if (typeof io !== 'undefined') {
                // Socket.IO is available, initialize WebSocket
                initializeWebSocket();
                
                // Disable auto-refresh since we have real-time updates
                autoRefresh = false;
                console.log('üì° Real-time updates enabled, auto-refresh disabled');
                
                // Update UI to show real-time mode
                setTimeout(() => {
                    if (document.getElementById('auto-refresh-status')) {
                        document.getElementById('auto-refresh-status').textContent = 'REAL-TIME';
                    }
                }, 100);
            } else {
                console.warn('‚ö†Ô∏è Socket.IO not available, using periodic polling instead');
                autoRefresh = true;
                startAutoRefresh();
            }
        });
        
        // Initialize charts
        function initializeCharts() {
            // Memory chart
            const memoryCtx = document.getElementById('memory-chart').getContext('2d');
            memoryChart = new Chart(memoryCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Conversations', 'Agent Insights', 'Task Outcomes', 'Project Knowledge'],
                    datasets: [{
                        data: [0, 0, 0, 0],
                        backgroundColor: ['#667eea', '#764ba2', '#f093fb', '#f5576c']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
            
            // Approval chart
            const approvalCtx = document.getElementById('approval-chart').getContext('2d');
            approvalChart = new Chart(approvalCtx, {
                type: 'bar',
                data: {
                    labels: ['Low Risk', 'Medium Risk', 'High Risk'],
                    datasets: [{
                        label: 'Approvals',
                        data: [0, 0, 0],
                        backgroundColor: ['#10b981', '#f59e0b', '#ef4444']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }
        
        // Refresh all data
        async function refreshAll() {
            await Promise.all([
                updateSystemStatus(),
                updateSuggestions(),
                updateMemoryStats(),
                updateApprovalStats(),
                updateActivityLog()
            ]);
        }
        
        // Update system status overview
        async function updateSystemStatus() {
            const overview = document.getElementById('status-overview');
            overview.innerHTML = '';
            
            for (const system of COACHING_SYSTEMS) {
                const card = document.createElement('div');
                card.className = 'status-card';
                
                // Determine status based on system activity
                let status = 'active';
                let metrics = await getSystemMetrics(system.id);
                
                card.innerHTML = `
                    <h3>
                        ${system.icon}
                        <span class="status-indicator status-${status}"></span>
                        ${system.name}
                    </h3>
                    <p style="color: #666; font-size: 0.9rem; margin-bottom: 15px;">${system.description}</p>
                    ${generateSystemMetrics(metrics)}
                `;
                
                overview.appendChild(card);
            }
        }
        
        // Get coaching system metrics from real API
        async function getSystemMetrics(systemId) {
            try {
                switch(systemId) {
                    case 'progress-visualizer':
                        const progressResponse = await fetch(`${API_BASE}/api/claude/coaching/progress`);
                        const progressData = await progressResponse.json();
                        if (progressData.success) {
                            const progress = progressData.progress;
                            return {
                                'Project Phase': progress.currentPhase,
                                'Milestones Reached': `${progress.milestonesReached}/${progress.totalMilestones}`,
                                'Recent Win': progress.recentWin
                            };
                        }
                        break;
                        
                    case 'confidence-meter':
                        const confidenceResponse = await fetch(`${API_BASE}/api/claude/coaching/confidence`);
                        const confidenceData = await confidenceResponse.json();
                        if (confidenceData.success) {
                            const conf = confidenceData.confidence;
                            return {
                                'Current Confidence': `${conf.overall.level} ${conf.overall.emoji}`,
                                'Feeling Good About': conf.feelingGoodAbout,
                                'Let\'s Double-Check': conf.doubleCheckSuggestion
                            };
                        }
                        break;
                        
                    case 'next-actions':
                        const nextStepsResponse = await fetch(`${API_BASE}/api/claude/coaching/next-steps`);
                        const nextStepsData = await nextStepsResponse.json();
                        if (nextStepsData.success && nextStepsData.nextSteps.length > 0) {
                            const nextStep = nextStepsData.nextSteps[0]; // First priority
                            return {
                                'Next Up': nextStep.content.slice(0, 40) + '...',
                                'Priority Level': nextStep.priority,
                                'Estimated Time': nextStep.timeEstimate
                            };
                        }
                        break;
                        
                    case 'learning-tracker':
                        const learningResponse = await fetch(`${API_BASE}/api/claude/coaching/learning`);
                        const learningData = await learningResponse.json();
                        if (learningData.success) {
                            const learning = learningData.learning;
                            return {
                                'Active Learning': learning.activeLearning,
                                'Skills Leveled Up': `${learning.skillsLeveledUp} this week`,
                                'Next Skill': learning.nextSkill
                            };
                        }
                        break;
                        
                    case 'problem-detector':
                        const problemsResponse = await fetch(`${API_BASE}/api/claude/coaching/problems`);
                        const problemsData = await problemsResponse.json();
                        if (problemsData.success) {
                            const problems = problemsData.problems;
                            return {
                                'Current Status': problems.currentStatus,
                                'Most Recent': problems.mostRecent,
                                'Prevention Score': `${problems.healthScore}% healthy`
                            };
                        }
                        break;
                        
                    default:
                        return {
                            'Status': 'Ready to help! üòä',
                            'Your Progress': 'Looking fantastic',
                            'Keep Going': 'You\'re doing amazing!'
                        };
                }
            } catch (error) {
                console.log(`API unavailable for ${systemId}, using fallback data`);
            }
            
            // Fallback to demo data if API calls fail
            switch(systemId) {
                case 'progress-visualizer':
                    return {
                        'Project Phase': Math.random() > 0.5 ? 'Building Features üèóÔ∏è' : 'Polish & Test üíé',
                        'Milestones Reached': `${Math.floor(Math.random() * 8) + 3}/12`,
                        'Recent Win': 'Added navigation menu!'
                    };
                    
                case 'confidence-meter':
                    const confidence = Math.random();
                    const level = confidence > 0.7 ? 'High üíö' : confidence > 0.4 ? 'Medium üíõ' : 'Low üß°';
                    return {
                        'Current Confidence': level,
                        'Feeling Good About': 'Your HTML structure',
                        'Let\'s Double-Check': confidence < 0.4 ? 'JavaScript logic' : 'All good!'
                    };
                    
                case 'next-actions':
                    const actions = [
                        'Add a hero section',
                        'Style your navigation', 
                        'Create a contact form',
                        'Make it mobile-friendly'
                    ];
                    return {
                        'Next Up': actions[Math.floor(Math.random() * actions.length)],
                        'Priority Level': Math.random() > 0.5 ? 'High Impact üéØ' : 'Quick Win ‚ö°',
                        'Estimated Time': `${Math.floor(Math.random() * 45) + 15} minutes`
                    };
                    
                case 'learning-tracker':
                    return {
                        'Active Learning': 'CSS Grid Layout',
                        'Skills Leveled Up': `${Math.floor(Math.random() * 5) + 1} this week`,
                        'Next Skill': 'JavaScript Functions'
                    };
                    
                case 'problem-detector':
                    const hasIssues = Math.random() > 0.6;
                    return {
                        'Current Status': hasIssues ? 'Found 2 friendly tips üí°' : 'All looking great! üéâ',
                        'Most Recent': hasIssues ? 'Close that HTML tag' : 'No issues detected',
                        'Prevention Score': `${Math.floor(Math.random() * 30) + 70}% healthy`
                    };
                    
                default:
                    return {
                        'Status': 'Taking a short break',
                        'Message': 'Back in a moment! üí´'
                    };
            }
        }
        
        // Generate system metrics HTML
        function generateSystemMetrics(metrics) {
            return Object.entries(metrics).map(([key, value]) => 
                `<div class="metric">
                    <span>${key}:</span>
                    <span class="metric-value">${value}</span>
                </div>`
            ).join('');
        }
        
        // Update next best steps panel with real API data
        async function updateSuggestions() {
            try {
                // Try to fetch real suggestions from API
                const response = await fetch(`${API_BASE}/api/claude/coaching/next-steps`);
                const data = await response.json();
                
                const container = document.getElementById('suggestions-list');
                
                if (data.success && data.nextSteps && data.nextSteps.length > 0) {
                    // Use real API data
                    container.innerHTML = data.nextSteps.map(suggestion => `
                        <div class="suggestion-item">
                            <div class="suggestion-category">
                                ${suggestion.icon} ${suggestion.category}
                                <span class="suggestion-confidence">${Math.round(suggestion.confidence * 100)}%</span>
                            </div>
                            <div class="suggestion-content">
                                ${suggestion.content}
                                <div style="margin-top: 8px; font-size: 0.8rem; color: var(--text-muted);">
                                    ‚è±Ô∏è Estimated time: ${suggestion.timeEstimate} ‚Ä¢ ${suggestion.priority}
                                </div>
                                ${suggestion.reasoning ? `<div style="margin-top: 5px; font-size: 0.75rem; color: var(--text-muted); font-style: italic;">üí° ${suggestion.reasoning}</div>` : ''}
                            </div>
                        </div>
                    `).join('');
                } else {
                    throw new Error('No suggestions available from API');
                }
                
            } catch (error) {
                console.log('API unavailable, using fallback suggestions');
                // Fallback to demo suggestions
                const coachingSuggestions = [
                    {
                        category: 'Quick Win',
                        confidence: 0.9,
                        content: 'Add a hero section with a welcoming message to make visitors feel at home',
                        timeEstimate: '15 min',
                        icon: '‚ö°',
                        priority: 'Quick Win ‚ö°'
                    },
                    {
                        category: 'Polish',
                        confidence: 0.8,
                        content: 'Make your navigation menu mobile-friendly for better user experience',
                        timeEstimate: '30 min',
                        icon: 'üì±',
                        priority: 'High Impact üéØ'
                    },
                    {
                        category: 'Feature',
                        confidence: 0.85,
                        content: 'Create a contact form so visitors can easily reach out to you',
                        timeEstimate: '45 min',
                        icon: 'üíå',
                        priority: 'High Impact üéØ'
                    },
                    {
                        category: 'Style',
                        confidence: 0.7,
                        content: 'Add some hover effects to your buttons for a more interactive feel',
                        timeEstimate: '20 min',
                        icon: '‚ú®',
                        priority: 'Quick Win ‚ö°'
                    }
                ];
                
                const container = document.getElementById('suggestions-list');
                const randomSuggestions = coachingSuggestions
                    .sort(() => Math.random() - 0.5)
                    .slice(0, 3);
                
                container.innerHTML = randomSuggestions.map(suggestion => `
                    <div class="suggestion-item">
                        <div class="suggestion-category">
                            ${suggestion.icon} ${suggestion.category}
                            <span class="suggestion-confidence">${Math.round(suggestion.confidence * 100)}%</span>
                        </div>
                        <div class="suggestion-content">
                            ${suggestion.content}
                            <div style="margin-top: 8px; font-size: 0.8rem; color: var(--text-muted);">
                                ‚è±Ô∏è Estimated time: ${suggestion.timeEstimate} ‚Ä¢ ${suggestion.priority}
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        }
        
        // Update learning journey statistics with real API data
        async function updateMemoryStats() {
            try {
                // Try to fetch real learning data from API
                const response = await fetch(`${API_BASE}/api/claude/coaching/learning`);
                const data = await response.json();
                
                let learningStats;
                
                if (data.success && data.learning) {
                    // Use real API data
                    learningStats = data.learning.skills;
                } else {
                    throw new Error('No learning data available from API');
                }
                
                // Convert technical percentages to friendly vibe levels
                const getVibeLevel = (percentage) => {
                    if (percentage >= 90) return { emoji: 'üî•', text: 'On Fire!', level: 'crushing it' };
                    if (percentage >= 75) return { emoji: '‚≠ê', text: 'Stellar!', level: 'really vibing' };
                    if (percentage >= 60) return { emoji: 'üåü', text: 'Shining!', level: 'getting the hang of it' };
                    if (percentage >= 40) return { emoji: 'üå±', text: 'Growing!', level: 'building confidence' };
                    if (percentage >= 20) return { emoji: 'üå∏', text: 'Blooming!', level: 'exploring and learning' };
                    return { emoji: 'üéØ', text: 'Starting!', level: 'taking first steps' };
                };

                const htmlVibe = getVibeLevel(learningStats.htmlSkills);
                const cssVibe = getVibeLevel(learningStats.cssSkills);
                const jsVibe = getVibeLevel(learningStats.jsSkills);
                const problemVibe = getVibeLevel(learningStats.problemSolving);

                const container = document.getElementById('memory-stats');
                container.innerHTML = `
                    <div class="memory-stat">
                        <div class="memory-stat-emoji">${htmlVibe.emoji}</div>
                        <div class="memory-stat-value">${htmlVibe.text}</div>
                        <div class="memory-stat-label">Building Web Pages</div>
                        <div class="memory-stat-subtitle">You're ${htmlVibe.level}</div>
                    </div>
                    <div class="memory-stat">
                        <div class="memory-stat-emoji">${cssVibe.emoji}</div>
                        <div class="memory-stat-value">${cssVibe.text}</div>
                        <div class="memory-stat-label">Making Things Pretty</div>
                        <div class="memory-stat-subtitle">You're ${cssVibe.level}</div>
                    </div>
                    <div class="memory-stat">
                        <div class="memory-stat-emoji">${jsVibe.emoji}</div>
                        <div class="memory-stat-value">${jsVibe.text}</div>
                        <div class="memory-stat-label">Adding Magic</div>
                        <div class="memory-stat-subtitle">You're ${jsVibe.level}</div>
                    </div>
                    <div class="memory-stat">
                        <div class="memory-stat-emoji">${problemVibe.emoji}</div>
                        <div class="memory-stat-value">${problemVibe.text}</div>
                        <div class="memory-stat-label">Figuring Things Out</div>
                        <div class="memory-stat-subtitle">You're ${problemVibe.level}</div>
                    </div>
                `;
                
                // Update learning chart with skill levels
                memoryChart.data.labels = ['HTML Skills', 'CSS Styling', 'JavaScript', 'Problem Solving'];
                memoryChart.data.datasets[0].data = [
                    learningStats.htmlSkills,
                    learningStats.cssSkills,
                    learningStats.jsSkills,
                    learningStats.problemSolving
                ];
                memoryChart.data.datasets[0].backgroundColor = ['#10b981', '#06b6d4', '#f59e0b', '#8b5cf6'];
                memoryChart.update();
                
            } catch (error) {
                console.log('API unavailable for learning stats, using fallback data');
                
                // Fallback to demo data
                const learningStats = {
                    htmlSkills: Math.floor(Math.random() * 30) + 60,
                    cssSkills: Math.floor(Math.random() * 25) + 45,
                    jsSkills: Math.floor(Math.random() * 20) + 20,
                    problemSolving: Math.floor(Math.random() * 15) + 75
                };
                
                // Convert technical percentages to friendly vibe levels
                const getVibeLevel = (percentage) => {
                    if (percentage >= 90) return { emoji: 'üî•', text: 'On Fire!', level: 'crushing it' };
                    if (percentage >= 75) return { emoji: '‚≠ê', text: 'Stellar!', level: 'really vibing' };
                    if (percentage >= 60) return { emoji: 'üåü', text: 'Shining!', level: 'getting the hang of it' };
                    if (percentage >= 40) return { emoji: 'üå±', text: 'Growing!', level: 'building confidence' };
                    if (percentage >= 20) return { emoji: 'üå∏', text: 'Blooming!', level: 'exploring and learning' };
                    return { emoji: 'üéØ', text: 'Starting!', level: 'taking first steps' };
                };

                const htmlVibe = getVibeLevel(learningStats.htmlSkills);
                const cssVibe = getVibeLevel(learningStats.cssSkills);
                const jsVibe = getVibeLevel(learningStats.jsSkills);
                const problemVibe = getVibeLevel(learningStats.problemSolving);
                
                const container = document.getElementById('memory-stats');
                container.innerHTML = `
                    <div class="memory-stat">
                        <div class="memory-stat-emoji">${htmlVibe.emoji}</div>
                        <div class="memory-stat-value">${htmlVibe.text}</div>
                        <div class="memory-stat-label">Building Web Pages</div>
                        <div class="memory-stat-subtitle">You're ${htmlVibe.level}</div>
                    </div>
                    <div class="memory-stat">
                        <div class="memory-stat-emoji">${cssVibe.emoji}</div>
                        <div class="memory-stat-value">${cssVibe.text}</div>
                        <div class="memory-stat-label">Making Things Pretty</div>
                        <div class="memory-stat-subtitle">You're ${cssVibe.level}</div>
                    </div>
                    <div class="memory-stat">
                        <div class="memory-stat-emoji">${jsVibe.emoji}</div>
                        <div class="memory-stat-value">${jsVibe.text}</div>
                        <div class="memory-stat-label">Adding Magic</div>
                        <div class="memory-stat-subtitle">You're ${jsVibe.level}</div>
                    </div>
                    <div class="memory-stat">
                        <div class="memory-stat-emoji">${problemVibe.emoji}</div>
                        <div class="memory-stat-value">${problemVibe.text}</div>
                        <div class="memory-stat-label">Figuring Things Out</div>
                        <div class="memory-stat-subtitle">You're ${problemVibe.level}</div>
                    </div>
                `;
                
                // Update learning chart with skill levels
                memoryChart.data.labels = ['HTML Skills', 'CSS Styling', 'JavaScript', 'Problem Solving'];
                memoryChart.data.datasets[0].data = [
                    learningStats.htmlSkills,
                    learningStats.cssSkills,
                    learningStats.jsSkills,
                    learningStats.problemSolving
                ];
                memoryChart.data.datasets[0].backgroundColor = ['#10b981', '#06b6d4', '#f59e0b', '#8b5cf6'];
                memoryChart.update();
            }
        }
        
        // Update AI confidence guide with real API data
        async function updateApprovalStats() {
            try {
                // Try to fetch real confidence data from API
                const response = await fetch(`${API_BASE}/api/claude/coaching/confidence`);
                const data = await response.json();
                
                let confidenceData;
                
                if (data.success && data.confidence) {
                    // Use real API data
                    confidenceData = data.confidence;
                } else {
                    throw new Error('No confidence data available from API');
                }
                
                const overall = confidenceData.overall;
                const confidenceColor = overall.level === 'High' ? 'var(--success)' : 
                                      overall.level === 'Good' ? 'var(--info)' : 'var(--warning)';
                
                const container = document.getElementById('approval-stats');
                
                container.innerHTML = `
                    <div class="metric">
                        <span>Overall Confidence:</span>
                        <span class="metric-value" style="color: ${confidenceColor};">${overall.level} ${overall.emoji}</span>
                    </div>
                    <div class="metric">
                        <span>Feeling Great About:</span>
                        <span class="metric-value">${confidenceData.feelingGoodAbout}</span>
                    </div>
                    <div class="metric">
                        <span>Let's Double-Check:</span>
                        <span class="metric-value">${confidenceData.doubleCheckSuggestion}</span>
                    </div>
                    <div class="metric">
                        <span>Suggestion Quality:</span>
                        <span class="metric-value">${confidenceData.suggestionQuality}% confident</span>
                    </div>
                `;
                
                // Update confidence chart with traffic light system based on real data
                const confidence = overall.percentage / 100;
                const greenConfidence = confidence > 0.8 ? overall.percentage : 0;
                const yellowConfidence = (confidence > 0.6 && confidence <= 0.8) ? overall.percentage : 0;
                const orangeConfidence = confidence <= 0.6 ? overall.percentage : 0;
                
                approvalChart.data.labels = ['High Confidence üíö', 'Good Confidence üíõ', 'Let\'s Research üß°'];
                approvalChart.data.datasets[0].label = 'AI Confidence Levels';
                approvalChart.data.datasets[0].data = [greenConfidence, yellowConfidence, orangeConfidence];
                approvalChart.data.datasets[0].backgroundColor = ['#10b981', '#f59e0b', '#fb923c'];
                approvalChart.update();
                
            } catch (error) {
                console.log('API unavailable for confidence data, using fallback');
                
                // Fallback to demo data
                const currentConfidence = Math.random() * 0.4 + 0.6; // 60-100% range
                const confidenceLevel = currentConfidence > 0.8 ? 'High' : currentConfidence > 0.6 ? 'Good' : 'Moderate';
                const confidenceColor = currentConfidence > 0.8 ? 'var(--success)' : currentConfidence > 0.6 ? 'var(--info)' : 'var(--warning)';
                const confidenceEmoji = currentConfidence > 0.8 ? 'üíö' : currentConfidence > 0.6 ? 'üíõ' : 'üß°';
                
                const container = document.getElementById('approval-stats');
                
                container.innerHTML = `
                    <div class="metric">
                        <span>Overall Confidence:</span>
                        <span class="metric-value" style="color: ${confidenceColor};">${confidenceLevel} ${confidenceEmoji}</span>
                    </div>
                    <div class="metric">
                        <span>Feeling Great About:</span>
                        <span class="metric-value">Your HTML structure</span>
                    </div>
                    <div class="metric">
                        <span>Let's Double-Check:</span>
                        <span class="metric-value">${currentConfidence > 0.7 ? 'All good! üéâ' : 'JavaScript logic'}</span>
                    </div>
                    <div class="metric">
                        <span>Suggestion Quality:</span>
                        <span class="metric-value">${Math.round(currentConfidence * 100)}% confident</span>
                    </div>
                `;
                
                // Update confidence chart with traffic light system
                const greenConfidence = currentConfidence > 0.8 ? Math.round(currentConfidence * 100) : 0;
                const yellowConfidence = (currentConfidence > 0.6 && currentConfidence <= 0.8) ? Math.round(currentConfidence * 100) : 0;
                const orangeConfidence = currentConfidence <= 0.6 ? Math.round(currentConfidence * 100) : 0;
                
                approvalChart.data.labels = ['High Confidence üíö', 'Good Confidence üíõ', 'Let\'s Research üß°'];
                approvalChart.data.datasets[0].label = 'AI Confidence Levels';
                approvalChart.data.datasets[0].data = [greenConfidence, yellowConfidence, orangeConfidence];
                approvalChart.data.datasets[0].backgroundColor = ['#10b981', '#f59e0b', '#fb923c'];
                approvalChart.update();
            }
        }
        
        // Update recent wins and progress with real API data
        async function updateActivityLog() {
            const container = document.getElementById('activity-log');
            
            try {
                // Try to fetch real achievements from API
                const response = await fetch(`${API_BASE}/api/claude/coaching/achievements`);
                const data = await response.json();
                
                if (data.success && data.achievements && data.achievements.length > 0) {
                    // Use real API data
                    container.innerHTML = data.achievements.map(achievement => `
                        <div class="log-entry" style="border-left: 3px solid var(--success);">
                            <span class="log-emoji">${achievement.emoji}</span>
                            <span class="log-timestamp">[${new Date(achievement.time).toLocaleTimeString()}]</span>
                            ${achievement.message}
                        </div>
                    `).join('');
                } else {
                    throw new Error('No achievements available from API');
                }
            } catch (error) {
                console.log('API unavailable for achievements, using fallback data');
                
                // Fallback to demo achievements
                const progressEntries = [
                    { emoji: 'üéâ', message: 'Amazing! You just completed your navigation menu', time: new Date() },
                    { emoji: '‚ú®', message: 'Great progress on your CSS styling - looking fantastic!', time: new Date(Date.now() - 30000) },
                    { emoji: 'üöÄ', message: 'Milestone reached: Your homepage structure is solid', time: new Date(Date.now() - 60000) },
                    { emoji: 'üí°', message: 'Smart choice! You organized your files perfectly', time: new Date(Date.now() - 120000) },
                    { emoji: 'üéØ', message: 'You\'re on fire! Added 3 new features today', time: new Date(Date.now() - 180000) },
                    { emoji: 'üìö', message: 'Learning win: You mastered CSS flexbox!', time: new Date(Date.now() - 240000) },
                    { emoji: 'üî•', message: 'Consistency champion: 5 days of coding in a row', time: new Date(Date.now() - 300000) }
                ];
                
                // Show recent wins
                const recentWins = progressEntries
                    .sort(() => Math.random() - 0.5)
                    .slice(0, 5);
                
                container.innerHTML = recentWins.map(entry => `
                    <div class="log-entry" style="border-left: 3px solid var(--success);">
                        <span class="log-emoji">${entry.emoji}</span>
                        <span class="log-timestamp">[${entry.time.toLocaleTimeString()}]</span>
                        ${entry.message}
                    </div>
                `).join('');
            }
        }
        
        // Auto-refresh functionality
        function startAutoRefresh() {
            if (refreshTimer) clearInterval(refreshTimer);
            
            if (autoRefresh) {
                refreshTimer = setInterval(refreshAll, REFRESH_INTERVAL);
                document.getElementById('auto-refresh-status').textContent = 'ON';
            } else {
                document.getElementById('auto-refresh-status').textContent = 'OFF';
            }
        }
        
        // Toggle auto-refresh
        function toggleAutoRefresh() {
            autoRefresh = !autoRefresh;
            startAutoRefresh();
        }
        
        // Click handlers
        document.querySelector('.auto-refresh').addEventListener('click', toggleAutoRefresh);
        
        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'r' && (e.ctrlKey || e.metaKey)) {
                e.preventDefault();
                refreshAll();
            }
        });

        // ===== VIBECOACH REAL-TIME WEBSOCKET INTEGRATION =====
        
        let vibeSocket = null;
        let isConnected = false;
        
        // Initialize WebSocket connection for real-time updates
        function initializeWebSocket() {
            try {
                // Connect to VibeCoach WebSocket namespace
                vibeSocket = io('/vibe-coach');
                
                vibeSocket.on('connect', () => {
                    console.log('‚úÖ Connected to VibeCoach real-time updates');
                    isConnected = true;
                    
                    // Subscribe to all coaching data types
                    vibeSocket.emit('subscribe', ['progress', 'confidence', 'learning', 'problems', 'achievements', 'next-steps']);
                    
                    // Update connection status in UI
                    updateConnectionStatus(true);
                });
                
                vibeSocket.on('disconnect', () => {
                    console.log('‚ùå Disconnected from VibeCoach updates');
                    isConnected = false;
                    updateConnectionStatus(false);
                });
                
                // Handle coaching data updates
                vibeSocket.on('coaching-update', (update) => {
                    console.log('üìä Real-time coaching update:', update.type);
                    handleRealtimeUpdate(update);
                });
                
                // Handle achievement notifications
                vibeSocket.on('new-achievement', (achievement) => {
                    console.log('üéâ New achievement:', achievement.achievement.message);
                    showAchievementNotification(achievement.achievement);
                    // Refresh achievements display
                    updateMemoryStats();
                });
                
                // Handle error events
                vibeSocket.on('error-event', (errorData) => {
                    console.log('üîç Error detected:', errorData);
                    showErrorNotification(errorData);
                });
                
                // Handle skill level ups
                vibeSocket.on('skill-level-up', (levelUp) => {
                    console.log('‚¨ÜÔ∏è Skill level up:', levelUp);
                    showSkillLevelUpNotification(levelUp);
                });
                
                // Handle WebSocket errors
                vibeSocket.on('error', (error) => {
                    console.warn('‚ö†Ô∏è VibeCoach WebSocket error:', error);
                });
                
                // Send periodic ping for keepalive
                setInterval(() => {
                    if (vibeSocket && isConnected) {
                        vibeSocket.emit('ping');
                    }
                }, 30000); // Every 30 seconds
                
            } catch (error) {
                console.warn('‚ö†Ô∏è Failed to initialize VibeCoach WebSocket:', error);
                // Fall back to periodic API polling
                startAutoRefresh();
            }
        }
        
        // Handle real-time updates from WebSocket
        function handleRealtimeUpdate(update) {
            try {
                switch (update.type) {
                    case 'progress':
                        updateProgressDisplay(update.data);
                        break;
                    case 'confidence':
                        updateConfidenceDisplay(update.data);
                        break;
                    case 'learning':
                        updateLearningDisplay(update.data);
                        break;
                    case 'problems':
                        updateProblemsDisplay(update.data);
                        break;
                    case 'achievements':
                        updateAchievementsDisplay(update.data);
                        break;
                    case 'next-steps':
                        updateNextStepsDisplay(update.data);
                        break;
                    case 'all-data':
                        // Full data refresh
                        refreshAll();
                        break;
                }
                
                // Update last refresh timestamp
                updateLastRefreshTime();
                
            } catch (error) {
                console.error('‚ùå Failed to handle real-time update:', error);
            }
        }
        
        // Educational AI Transparency Features
        
        // Show achievement notification with animation
        function showAchievementNotification(achievement) {
            const notification = document.createElement('div');
            notification.className = 'achievement-notification';
            notification.innerHTML = `
                <div class="achievement-content">
                    <div class="achievement-emoji">${achievement.emoji}</div>
                    <div class="achievement-text">
                        <div class="achievement-title">Achievement Unlocked!</div>
                        <div class="achievement-message">${achievement.message}</div>
                    </div>
                </div>
            `;
            
            // Add CSS for notification if not already present
            if (!document.querySelector('#achievement-notification-styles')) {
                const styles = document.createElement('style');
                styles.id = 'achievement-notification-styles';
                styles.textContent = `
                    .achievement-notification {
                        position: fixed;
                        top: 80px;
                        right: 20px;
                        background: linear-gradient(135deg, #10b981, #059669);
                        color: white;
                        padding: 15px 20px;
                        border-radius: 12px;
                        box-shadow: 0 8px 32px rgba(16, 185, 129, 0.3);
                        z-index: 10000;
                        animation: slideInRight 0.5s ease-out, fadeOut 0.5s ease-in 4.5s forwards;
                        max-width: 350px;
                    }
                    
                    .achievement-content {
                        display: flex;
                        align-items: center;
                        gap: 12px;
                    }
                    
                    .achievement-emoji {
                        font-size: 24px;
                    }
                    
                    .achievement-title {
                        font-weight: 600;
                        font-size: 14px;
                        margin-bottom: 4px;
                    }
                    
                    .achievement-message {
                        font-size: 13px;
                        opacity: 0.9;
                    }
                    
                    @keyframes slideInRight {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                `;
                document.head.appendChild(styles);
            }
            
            document.body.appendChild(notification);
            
            // Remove notification after animation
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 5000);
        }
        
        // Show error event notification for learning
        function showErrorNotification(errorData) {
            if (!errorData.resolved) {
                // Show helpful error detected message
                const notification = document.createElement('div');
                notification.className = 'error-notification';
                notification.innerHTML = `
                    <div class="error-content">
                        <div class="error-emoji">üîç</div>
                        <div class="error-text">
                            <div class="error-title">Learning Opportunity Detected</div>
                            <div class="error-message">Error detected - let's learn from it!</div>
                        </div>
                    </div>
                `;
                
                // Add CSS for error notification
                if (!document.querySelector('#error-notification-styles')) {
                    const styles = document.createElement('style');
                    styles.id = 'error-notification-styles';
                    styles.textContent = `
                        .error-notification {
                            position: fixed;
                            top: 140px;
                            right: 20px;
                            background: linear-gradient(135deg, #f59e0b, #d97706);
                            color: white;
                            padding: 15px 20px;
                            border-radius: 12px;
                            box-shadow: 0 8px 32px rgba(245, 158, 11, 0.3);
                            z-index: 10000;
                            animation: slideInRight 0.5s ease-out, fadeOut 0.5s ease-in 3.5s forwards;
                            max-width: 350px;
                        }
                        
                        .error-content {
                            display: flex;
                            align-items: center;
                            gap: 12px;
                        }
                        
                        .error-emoji {
                            font-size: 20px;
                        }
                        
                        .error-title {
                            font-weight: 600;
                            font-size: 14px;
                            margin-bottom: 4px;
                        }
                        
                        .error-message {
                            font-size: 13px;
                            opacity: 0.9;
                        }
                    `;
                    document.head.appendChild(styles);
                }
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 4000);
            }
        }
        
        // Show skill level up notification
        function showSkillLevelUpNotification(levelUp) {
            const notification = document.createElement('div');
            notification.className = 'skill-notification';
            notification.innerHTML = `
                <div class="skill-content">
                    <div class="skill-emoji">üìà</div>
                    <div class="skill-text">
                        <div class="skill-title">Skill Level Up!</div>
                        <div class="skill-message">${levelUp.skill}: ${levelUp.oldLevel}% ‚Üí ${levelUp.newLevel}%</div>
                    </div>
                </div>
            `;
            
            // Add CSS for skill notification
            if (!document.querySelector('#skill-notification-styles')) {
                const styles = document.createElement('style');
                styles.id = 'skill-notification-styles';
                styles.textContent = `
                    .skill-notification {
                        position: fixed;
                        top: 200px;
                        right: 20px;
                        background: linear-gradient(135deg, #8b5cf6, #7c3aed);
                        color: white;
                        padding: 15px 20px;
                        border-radius: 12px;
                        box-shadow: 0 8px 32px rgba(139, 92, 246, 0.3);
                        z-index: 10000;
                        animation: slideInRight 0.5s ease-out, fadeOut 0.5s ease-in 4.5s forwards;
                        max-width: 350px;
                    }
                    
                    .skill-content {
                        display: flex;
                        align-items: center;
                        gap: 12px;
                    }
                    
                    .skill-emoji {
                        font-size: 20px;
                    }
                    
                    .skill-title {
                        font-weight: 600;
                        font-size: 14px;
                        margin-bottom: 4px;
                    }
                    
                    .skill-message {
                        font-size: 13px;
                        opacity: 0.9;
                    }
                `;
                document.head.appendChild(styles);
            }
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 5000);
        }
        
        // Update connection status indicator
        function updateConnectionStatus(connected) {
            const indicator = document.querySelector('.status-indicator') || document.createElement('div');
            indicator.className = `status-indicator ${connected ? 'status-active' : 'status-error'}`;
            
            // Add connection status to header if not exists
            if (!document.querySelector('.connection-status')) {
                const header = document.querySelector('.dashboard-header');
                if (header) {
                    const statusDiv = document.createElement('div');
                    statusDiv.className = 'connection-status';
                    statusDiv.innerHTML = `
                        <span class="connection-label">Real-time: </span>
                        <span class="connection-indicator ${connected ? 'status-active' : 'status-error'}"></span>
                        <span class="connection-text">${connected ? 'Connected' : 'Disconnected'}</span>
                    `;
                    
                    // Add CSS for connection status
                    if (!document.querySelector('#connection-status-styles')) {
                        const styles = document.createElement('style');
                        styles.id = 'connection-status-styles';
                        styles.textContent = `
                            .connection-status {
                                display: flex;
                                align-items: center;
                                gap: 8px;
                                font-size: 14px;
                                color: var(--text-secondary);
                                margin-top: 10px;
                            }
                            
                            .connection-indicator {
                                width: 8px;
                                height: 8px;
                                border-radius: 50%;
                                display: inline-block;
                            }
                            
                            .connection-label {
                                font-weight: 500;
                            }
                            
                            .connection-text {
                                font-size: 13px;
                            }
                        `;
                        document.head.appendChild(styles);
                    }
                    
                    header.appendChild(statusDiv);
                }
            } else {
                // Update existing status
                const statusDiv = document.querySelector('.connection-status');
                const indicatorSpan = statusDiv.querySelector('.connection-indicator');
                const textSpan = statusDiv.querySelector('.connection-text');
                
                indicatorSpan.className = `connection-indicator ${connected ? 'status-active' : 'status-error'}`;
                textSpan.textContent = connected ? 'Connected' : 'Disconnected';
            }
        }
        
        // Update last refresh time
        function updateLastRefreshTime() {
            const timestamp = document.querySelector('.last-refresh-time');
            if (timestamp) {
                timestamp.textContent = new Date().toLocaleTimeString();
            }
        }
        
    </script>
    
    <!-- Socket.IO Client Library for Real-time Updates -->
    <script src="/socket.io/socket.io.js"></script>
</body>
</html>